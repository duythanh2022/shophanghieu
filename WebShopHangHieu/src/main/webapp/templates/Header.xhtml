
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <header>
        <nav class="navbar navbar-expand-sm sticky-top ">
            <h:link value="Hang Hieu" styleClass="navbar-brand logo"></h:link>
            <button class="navbar-toggler btn btn-primary" type="button" data-toggle="collapse" data-target="#collapsibleNavbar"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="collapsibleNavbar">
                <ul class="navbar-nav">
                  <li class="nav-item">
                      <h:link styleClass="nav-link text-light" value="Home" style="font-size: 22px; margin: 20px;"
                              includeViewParams="true"
                                       outcome="index.xhtml?faces-redirect=true"></h:link>
                  </li>
                  <li class="nav-item">
                    <h:link styleClass="nav-link text-light" value="Shop" style="font-size: 22px; margin: 20px;"
                            includeViewParams="true"
                                       outcome="Products?faces-redirect=true"></h:link>
                  </li>
                  <li class="nav-item">
                   <h:link styleClass="nav-link text-light" value="Contact" style="font-size: 22px; margin: 20px;"></h:link>
                  </li>    
                </ul>
                
            </div>  
            <h:form class="form-inline my-2 my-lg-0" enctype="multipart/form-data">
                <!--<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">-->
                <h:inputText styleClass="form-control mr-sm-2" value="#{searchBean.kw}">
                        
                    </h:inputText>
                <!--<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Tìm Kiếm</button>-->
                <h:commandButton styleClass="btn btn-outline-success my-2 my-sm-0" value="Tìm Kiếm" 
                                 action="#{searchBean.proByKw()}"></h:commandButton>
            </h:form>
        </nav>
        <div class="links-pro">
            <c:if test="#{facesContext.viewRoot.viewId=='/Products.xhtml'}">
                <ul>
                    <li>Home</li>
                    <li>Shop</li>
                </ul>
                </c:if>
        </div>
        <div class="dv-login">
            <c:if test="#{facesContext.externalContext.sessionMap.get('user')==null}" >
                <h:link styleClass="btn btn-outline-warning" value="Dang nhap" 
                              includeViewParams="true"
                                       outcome="Login.xhtml?faces-redirect=true"></h:link>
                <h:link styleClass="btn btn-outline-info" value="Dang ky" 
                              includeViewParams="true"
                                       outcome="Register.xhtml?faces-redirect=true"></h:link>
            </c:if>
            <c:if test="#{facesContext.externalContext.sessionMap.get('user')!=null}">
                <c:if test="#{facesContext.externalContext.sessionMap.get('user').roll==0}">
                    <h:link styleClass="btn btn-outline-info" value="Admin" 
                              includeViewParams="true"
                                       outcome="AdminLogin.xhtml?faces-redirect=true"></h:link>
                </c:if>
                <h:link styleClass="btn btn-outline-warning" 
                        value="#{facesContext.externalContext.sessionMap.get('user').fullname}" 
                              ></h:link>
                
                <h:form>
                    <h:commandLink styleClass="btn btn-outline-info" value="Dang xuat" style="padding: 10px;"
                                   action="#{userBean.logout()}"
                                   ></h:commandLink>
                </h:form>
                </c:if>
               
        </div>
        <div class=" cart dropdown">
            <button class="btn cart-btn dropdown-toggle"
                    aria-haspopup="true" aria-expanded="false" data-toggle="dropdown">
                <i class="fas fa-shopping-cart" ></i></button>
                <div class="dropdown-menu" style="width: 500px;">
                <h:form>
                   
                    <h:dataTable var="cart" value="#{cartBean.carts}" styleClass="table-cart table" style="font-family: Times New Roman;">
                            <h:column>
                                <h:inputHidden value="#{cart['proid']}"  />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Name</f:facet>
                                
                                    #{cart['proName']}
                                
                            </h:column>
                            <h:column>
                                <f:facet name="header">count</f:facet>
                                <!--<span class="txt-count"></span>-->
                                <h:inputText value="#{cart['count']}" style="width: 50px;background: none;border: none;" disabled="true" styleClass="txt-count" />
                                
                            </h:column>
                            <h:column>
                                <f:facet name="header">price</f:facet>
                                
                                <span class="txt-price">#{cart['proprice']}</span>
                            </h:column>
                            <h:column >
                                <f:facet name="header">Total</f:facet>
                                
                                <h:inputText value="#{cart['proprice']*cart['count']}" style="width: 70px;background: none;border: none;" disabled="true" styleClass="txt-total" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Delete</f:facet>
                                <h:commandButton value="x" styleClass="btn btn-outline-success">
                                    <f:ajax listener="#{cartBean.deleteCart(cart['proid'])}"
                                            onevent="deleteSuccss(#{cart['proid']})"></f:ajax>
                                </h:commandButton>
                            </h:column>
                            
                        </h:dataTable>
                        <div style="text-align: center">
                            <h3  >Subtotal: <span id="txt-pri">${cartBean.subtotal}</span></h3>
                            <h:link styleClass="btn btn-outline-warning" value="CHECK OUT" style="font-size: 22px; margin: 20px;"
                                    includeViewParams="true"
                                    outcome="CheckOut.xhtml?faces-redirect=true"></h:link>
                        </div>
                            
                   
                </h:form>
            </div>
        </div>
        
    </header>
</ui:composition>
